---
tags: []
date: 2024-12-05
time: 21:34
---
採用架構只是為了降低失敗的風險，而不是因為使用了無法證明架構風格與設計模式的合理性增加失敗的風險。因此，必須要能夠解釋使用架構會產生的影響，否則就應該排除使用。

# 六角架構
*p.156*

# 服務導向架構 Service-Oriented Architecture SOA

| 服務設計原則                                      | 說明                                                      |
| ------------------------------------------- | ------------------------------------------------------- |
| 1. 服務合約<br><br>( Service Contract)          | 服務應在一到多個描述性文件檔案中，以合約方式明確定義出服務的功能與目的。                    |
| 2. 服務鬆耦合<br><br>( Service Loose Coupling)   | 服務應最小化相依性，並且僅在雙方都認知彼此存在的情況下。                            |
| 3. 服務抽象<br><br>( Service Abstraction)       | 服務僅對用戶端公開合約文件資訊，業務邏輯則持續隱藏在服務內部。                         |
| 4. 服務可重複使用性<br><br>(Service Reusability )   | 服務可以被其他服務重複使用，並以此組建出具備更多功能的大型服務。                        |
| 5. 服務自主性<br><br>( Service Autonomy)         | 為保持一致性與可靠性，服務應將自身的環境與資源維持在可獨立運作的條件下。                    |
| 6. 服務無狀態<br><br>(Service Statelessness )    | 服務將回應的「狀態」交由用戶端負責管理，但不與前述的「自主性」原則的條件相衝突。                |
| 7. 服務可見性<br><br>( Service Discoverability ) | 服務以各種描述性資料（metadata）進行描述，使服務可被查找、而其合約易於理解，成為真正可重複使用的資產。 |
| 8. 服務可組合性<br><br>( Service Composability)   | 服務可以組合形成更大型的多功能服務，不論它們組合的規模大小與複雜度為何。                    |


# REST 架構風格
#### REST是一種架構風格
一種運用於Web架構上的架構風格。
*p.165*

幂等操作 idempotent
重複執行的結果都是一樣的操作

# 命令與查詢職責分離 CQRS
command, query responsibility segregation
*p.171*
這邊看不太懂，對該技術太不熟悉了，講了很多實務的東西。
不過重點應該是：考量什麼時候適合使用CQ分離帶來的好處。

# 事件驅動架構
基於訊息交換機制的系統，通常都呈現一種「管道與過濾器」設計風格

#### 管道與過濾器
```shell
cat phone_numbers.txt | grep 303 | wc -l
```
這些指令扮演著「過濾器」的角色，將輸入的資料改變再輸出。

|   |   |
|---|---|
|特性|說明|
|管道是訊息通道|過濾器從輸入管道接收訊息，再把訊息發送到輸出管道。因此管道是作為訊息管道。|
|管道與過濾器透過埠囗相連|過濾器與輸入/ 輸出的管道之間，透過埠口（Port）相連。埠口使得六角架構（埠口與轉接器）成為適用於整個系統的架構風格。|
|過濾器只是處理嚣|過濾器會「處理」訊息，但不一定會過濾訊息。|
|各自獨立的處理器|每個過濾處理器都是一個獨立的元件，在設計上呈現出適合的元件粒度（granularity）。|
|遵循鬆耦合原則|每個過濾處理器都是獨立的，與其他過濾處理器保持鬆耦合。至於這些過濾處理器的組合，則是透過設定的方式（configuration）來進行定義。|
|可互換性|處理器接收訊息的順序，可以根據使用案例的需求來變換；同樣會透過設定的方式完成。|
|過濾器可使用多管道|命令列的過濾器只會從單一管道讀取並寫入到單一管道；但訊息交換機制的過濾器可以從多條管道讀取、也能寫入到多條管道，這代表可以進行平行或並行處理。|
|平行使用多個同類型過濾器|針對作業最繁重或速度最慢的過濾器，可以部署多個過濾器以提高處理效率。|
### 長期運行處理程序 Saga
Long-Running Process，又稱Saga（意指長篇史詩或長敘事之意）。



在投入心力去設計這長期運行處理成續時必須謹慎為之，當基礎設施發生障礙或作業失敗時，應備有完善的異常復原機制。

### 事件朔源
把像是git這樣的追蹤工具應用到領域模型上。
我們希望建立一套機制，把侏儒是什麼建立了聚合實力、聚合實例在模型中的種種操作都記錄下來。有了這些操作的歷程記錄後，甚至可以建立時序模型（temporal model），而這個層次變更正是事件朔源設計模式之精神所在。

本書所討論的，泛指在領域模型中任何聚合實例在執行命令操作後，會發佈至少一則描述了執行結果的領域事件。這些事件都會依照時間發生順序存入Event Store。
將這些事件的發生順序重新植性一次，可以重建該聚合實例的狀態。

如果經歷了很長一段時間，事件累積的過多，我暪可以利用聚合狀態的「快照」來達到最佳化。
達到某個門檻時，將聚合在記憶體中的狀態快照下來。

附錄A有實作聚合與事件朔源機制的細節。


[高速大量業務的應用架構關鍵](https://www.ithome.com.tw/voice/135194)


# Fata Fabric與網格分散式運算
剛傳統資料庫成了效能瓶頸，網格運算提供了運算效能以及可擴展能力。

