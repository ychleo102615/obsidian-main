---
tags: []
date: 2024-11-28
time: 21:47
---
## DDD的全貌
領域不是要建立一個包山包海的「企業領域」；反而關注的是更小規模的領域，而整家公司的領域則是由大大小小的子領域所構成。

### 實際應用的子領域與Bounded Context
以線上購物的零售商作為舉例：
##### Bounded Context
- 電商系統
- 庫存系統
- 市場需求預測系統
##### 子領域
- 商品型錄 Catalog
- 訂單 Order
- 金流 Invoicing
- 物流 Shipping
- 庫存

**明確地區隔不同的情境，是成功實作DDD的關鍵。**

從圖2.1的例子中，考慮「顧客」這個詞在不同情境下的語意。
- 商品目錄：顧客包含了之前購買的品項、會員忠誠度、折扣、寄送方式...
- 訂單：顧客像是收件人、帳單姓名、應負總額、付款條件...
既然不是一個術語明確表達一種領概念，那這就算不是一個界線清楚的Bounded Context。

「品項」這個詞也很曖昧：
預購商品、已取貨商品、存貨商品、出貨商品、報廢商品...

實作DDD時，不要留下任何模糊空間。領域專家的描述方式有著我們分清楚不同的概念。


> [!NOTE] 領域與Bounded Context
> 在書中的例子，他們沒有誰比誰大，可以互相交疊，是多對多的關係。

### 情境用語
#### 協作情境
發文者、版主、論壇
#### 身份存取情境
使用者、權限
屬於安全性子領域



### 實務中的領域與子領域

領域分成「問題空間」與「解答空間」。
#### 問題空間
領域中有待開發為一個新核心領域的部分。問題空間是由核心領域及必要的子領域共同構成。
可以透過子領域來了解問題空間（為了解決問題，我們需要了哪些子領域）。

#### 解答空間
一到多個的Bounded Context，也就是將解決方案轉變為實際可用的軟體。

ERP: enterprise resource planning

> [!NOTE]
> 在實際執行解決方案之前，要對問題空間與解答空間進行評估。為了將專案導向正確的方向，請先回答以下幾個問題：
> - 這個戰略核心領域的名稱與願景是什麼？
> - 與這個戰略核心領域有關的概念有哪些？
> - 需要哪些支援子領域以及通用子領域的配合？
> - 各領域的工作應該由哪些人負責執行？
> - 有適當人選組成合適的團隊嗎？
> 
> 解答空間和現有系統與技術以及預計開發的系統與技術息息相關，所以必須清清楚楚地分開考量每個 Bounded Context 和各個 Bounded Context 的通用語言，然後評估以下這些問題：
> - 手頭上有哪些軟體，是否可以作為資源運用？
> -   還有哪些軟體資源是需要額外取得或開發的？
> - 這些資源彼此之間如何關聯或如何整合？
> - 需要額外整合進來的部分有哪些？
> - 以這些既有資源與預計開發的資源為基礎，需要進行哪些工作？
> - 作為戰略目標的專案以及推動戰略目標的支援專案，成功的機會多高？當中是否有可能成為拖慢進度甚至導致失敗的絆腳石？
> - 通用語言的術語在哪些地方完全不同？  
> - 哪些 Bounded Context 之間出現概念或資料上的重疊、共用情形？  在交集的Bounded Context 之間，這些共用的術語或重複的概念是如何對映及轉換的？
> - 哪一個 Bounded Context 包含了核心領域的概念？建模時又該使用［Evans］中的哪一種戰術模式？

### Bounded Context應要要多大
要「夠大」。不要多也不要少。

哪些因素會導致畫錯Bounded Context的範圍？
1. 以平台、框架或其他基礎設施等官點出發的慣性思考方式，導致我們以技術思維而非語境思維來思考Bounded Context。
2. 為了配合可用開發人員的工作分派。完全沒有必要為了管理技術面的資源而劃分假邊界。

為你的模型畫出一個大大的橢圓形，作為暫定的Bounded Context範圍。
在這個橢圓形裡面寫下你卻的程式碼會實作的主要概念，然後看看有沒有應該存在卻漏掉的概念，以及是否出現了不該存在於此的概念。

### 協作情境

[[Part IV： 戰略設計#建立Segregated core的代價]]
這邊的支援性功能就是安全與權限管理。必須把身份與存取情境分離出去，作為協作情境的通用子領域，才是真正治本的方法。

### 身份與存取情境

穀倉效應：一個系統的使用這與其他系統使用這之間的關聯難以建立起來，就算使用這些系統的人是同一個人也一樣。各自為政的情況。

多租戶：在SaaS（Software as a Service）中，多租戶（Multi-Tenant）的意思是指一個軟體應用程式和其基礎設施可以同時服務於多個客戶（租戶），每個租戶通常是獨立的組織或個人。

### 敏捷式專案管理情境
ProjectOvation，CollabOvation是他的支援子領域。

> [!NOTE]
> P r o j e c t O v a t i o n 還 有 ⼀ 項 需 求 是 ， 要 能 夠 以 ⼀ 組 獨 ⽴ 的 應 ⽤ 服 務 來 運 作 ， 所 以 開 發 團隊 打 算 盡 可 能 地 限 制 P r o j e c t O v a t i o n 對 其 他 B o u n d e d C o n t e x t 的 相 依 性 ， 至 少 要 在 可 ⾏的 範 圍 內 。 正 常 來 說 ， 當 I d O v a t i o n 或 C o l l a b O v a t i o n 服 務 因 為 各 種 原 因 導 致 無 法 使 ⽤ 時 ，P r o j e c t O v a t i o n 也 可 以 ⾃ ⾏ 運 作 無 誤 ︔ 雖 然 在 這 段 期 間 ⼀ 定 會 出 現 資 料 不 同 步 的 情 形 ，但 時 間 不 會 太 久 ， 應 該 不 妨 礙 系 統 的 使 ⽤ 。

## Bounded Context的重要性
Bounded Context 主要是指「語意上的分界」

情境也可以是以時間階段來區分的。
以出版一本書為例子，書在不同的階段，內容、意義、功能可能都不一樣。
每個階段都應建立獨立的Bounded Context。

Bounded Context主要用來封裝通用語言及其領域模型，但同時也包含與領域模型互動和支援的相關功能。

