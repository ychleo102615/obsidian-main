---
tags: []
date: 2024-06-30
time: 15:09
---
# Guide to this book

#### 架構
展略與戰術公寓謝領域模型，必須不受架構縣市，架構應該存在於模型與模型之間或模型周邊。其中一種推薦用在Bounded Context的是六角架構。
之所以要區分架構與領域模型，是因為我們有時容易過度強調架構，而忽略以領域驅動設計建模的重要性。架構也很重要沒錯，但架構的影響會隨著時間變遷，領域模型的影響則是深遠的。


## SaasOvation公司
p. 49

### ColabOvation
一款企業協作套裝軟體，同時結合了社交軟體功能。包括論壇、共享行事曆、部落格、即時訊息、wiki、留言板、文件管理、公告與通知、活動紀錄、RSS訂閱功能。

### ProjectOvation
著眼於敏捷開發專案的管理，採用Scrum作為迭代、增量的專案管理框架。


# 1. DDD入門

## 貧血與失憶
### 貧血領域模型
只有setter, getter，沒有什麼業務邏輯在裡面。（檢查表p.16）
這樣的偽領域模型更像是Active Record。
[[物件關聯阻抗不匹配 Object relational impedance mismatch]]

### 失憶
一開始把物件做得很開放（例如customer.city, customer.phone都可以是null），過一陣子之後會無法理解這樣設計的用意。

## 如何實踐DDD

兩大重點：通用語言、[[Bounded Context（有界情境）]]

### 通用語言
護理師對病患施打了標準劑量的流感疫苗
```java
Vaccine vaccine = vaccines.standardAdultFluDose();
nurse.admisterFluVaccine(patient, vaccine)
```


## 應用DDD會遇到的挑戰

p. 38
一、屬性存取器
```java
backlogItem.setSprintId(sprintId);
backlogItem.setStatus(BacklogItemStatusType.COMMITTED);
```

二、領域物件
```java
public void commitTo(Sprint aSprint) {
	if (!this.isScheduledForRelease()) {
		throw new IllegalStateException(
			"Must be scheduled for release to commit to sprint.");
	}
	if (this.isCommittedToSprint()) {
		if (!aSprint. sprintId(). equals(this.sprintId())) { 
			this.uncommitFromSprint); 
		}
	}
	this.elevateStatusWith(BacklogItemStatus.COMMITTED); 
	this.setSprintId(aSprint.sprintId());

	DomainEventPublisher
		.instance()
		.publish(new BacklogItemCommitted(
			this.tanant(),
			this.backlogItemId(),
			this.sprintId()));
}
```


> [!NOTE] 
> 要有一項把待辦清單項目送入衝刺的功能；必須在待辦事項已經安排好發布時間才能夠送入。
> 如果待辦清單項目先前曾經送入其他衝刺中，必須先取消抽回，等成功送入後，再通知相關人員。

DDD-Lite模式是挑選DDD戰術模式的一部分直接採用，不重視如何探索、捕捉並定義通用語言，也忽略Bounded Context和情境地圖的存在。



# 3. 情境地圖


情境地圖不是企業架構，而是用於描述模型間互動關係及在DDD中使用的組織整合設計模式。

下游依賴於上游


#### 開放主機服務
以REST服務的形式供用戶端的Bounded Context存取資源

####  公開發佈的語言(Published Language)
- XML
- JSON
- Google Protocol Buffers

#### 防護層
下游的防護層將結果轉換為本地情境中的領域物件。
例如：「協作情境」向「身份與存取情境」請求「版主角色的使用者」資源查詢，可能會收到XML, JSON格式的資源後，再轉換為Moderator值物件（此時已是下游模型）
