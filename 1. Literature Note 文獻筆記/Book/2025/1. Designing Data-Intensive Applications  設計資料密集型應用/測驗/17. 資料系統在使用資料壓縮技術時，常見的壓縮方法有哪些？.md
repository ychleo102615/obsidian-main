---
tags: []
date: 2025-07-16
time: 21:46
---
題目：資料系統在使用資料壓縮技術時，常見的壓縮方法有哪些？請簡要比較字典編碼（dictionary encoding）與運行長度編碼（run-length encoding）的適用場景與壓縮效果。

**出處**：這兩種壓縮技術都在 DDIA **第 3 章〈Storage and Retrieval〉**中「Column-oriented storage」一節下的「Compression」討論裡介紹到 [GitHub](https://github.com/ResidentMario/designing-data-intensive-applications-notes/blob/master/Chapter%203%20---%20Storage%20and%20Retrieval.ipynb?utm_source=chatgpt.com)。

---

## 字典編碼（Dictionary Encoding）

- **原理**：為某一欄位的所有不同值（value）建立一張「字典」（陣列或映射表），把實際資料中出現的值都轉成字典中對應的索引（通常是小整數）。
    
- **適用場景**：
    
    - **低卡值（low cardinality）**：欄位可選值不多（例如性別、國家代碼、職業分類），字典大小遠小於資料筆數。
        
- **壓縮效果**：
    
    - 把原本儲存多字元字串或大整數的空間，壓縮成固定寬度（如 1–2 byte）的索引，大幅減少空間；
        
    - 查詢時只要先在字典中查出索引再映回原值。
        

---

## 運行長度編碼（Run‑Length Encoding, RLE）

- **原理**：將**連續重複**（run）出現的相同值壓成「值＋次數」的形式。例如 `AAAAA`→`(A,5)`。
    
- **適用場景**：
    
    - **長區間重複**：欄位值常在大區塊裡不變（例如時間序列中長時間沒有變動的感測值、稀疏布林欄位）。
        
- **壓縮效果**：
    
    - 當 run 很長時，儲存空間接近常數，讀時也能快速跳過大量相同值；
        
    - 若資料變化頻繁、run 很短，反而有可能造成編碼後比原始資料更大。
        

---

### 簡要比較

|特性|字典編碼|運行長度編碼|
|---|---|---|
|**最佳場景**|少量不同值、大量重複用同一值|長時間連續重複的區段|
|**壓縮比**|取決於字典大小與原始值大小；低卡欄位可壓縮 > 90 %|取決於 run 長度；run ≫ 1 時壓縮比高|
|**查詢成本**|較低：讀索引 → 字典查回原值|較低：順序掃描值＋ run 長度，或用跳表快速跳過|
|**額外資料結構**|字典映射表|只需存「值＋次數」對|

---

**何時選擇**

- 若欄位可選值少、查詢中要頻繁解碼原值，就選 **字典編碼**；
    
- 若欄位在長區間內不變、且要做大量範圍掃描，就選 **運行長度編碼**。