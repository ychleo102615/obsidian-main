---
tags: []
date: 2025-06-16
time: 22:29
---
主鍵索引必須是唯一的，這可能在很多場景不是那麼好用，例如範圍搜尋（像是年齡），或是依照分類搜尋（國家、職業），那這個時候就是二級索引派上用場的時候了。建立二級索引需要一些時間，而且不必馬上就建立，但是主鍵建立時就得確立並且保證唯一了。


**為什麼需要二級索引？**  
在實務場景中，常常需要依照非主鍵欄位做範圍查詢或分組過濾，例如「年齡區間查詢」、「按國家分頁顯示」、「依訂單狀態排序」等。這些查詢如果只靠主鍵索引，就必須整表掃描，效能不佳。

**Primary vs. Secondary Index 查詢差異**

- **Primary Index（叢集索引）**：資料依主鍵排序存放，查主鍵只需一次 B-Tree 導向整頁讀取；
    
- **Secondary Index（非叢集索引）**：資料結構只存欄位值＋指標，查二級索引後還要「回表」才能拿到完整列，增加一次或數次 I/O。


### 什麼是叢集索引

在資料庫索引裡，「clustered」（叢集、群集）指的是**把資料「依某個欄位的順序」實際地排列存放**，也就是把索引結構和資料本身綁在一起。

- **Cluster 的本意**：一群、一簇事物聚在一起的意思。
    
- **Clustered Index（叢集索引）**：
    
    - 資料庫將整張表的資料，**依主鍵（或指定欄位）排序後**，直接存放在磁碟頁（page）裡；
        
    - 這棵 B-Tree 的葉節點就是實際的資料列，讀索引就等同於讀資料本身。