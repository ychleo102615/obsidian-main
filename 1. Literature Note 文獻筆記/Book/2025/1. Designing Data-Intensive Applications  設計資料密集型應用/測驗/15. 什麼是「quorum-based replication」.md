---
tags: []
date: 2025-07-11
time: 22:22
---
題目：在分散式系統中，什麼是「quorum-based replication」？請說明它如何利用讀寫仲裁（read/write quorums）來維持資料一致性。

回答：他是一個公式，用來判斷在多個節點中讀取或是寫入時，該動作是否有效？如果我們總共有5個節點，那通常我們只需要3個讀取是同一個值，或是3個寫入成功，那就代表該次動作有效。 我並不確定我的回答。

## Quorum-Based Replication 原理

假設系統有 **N** 個複本節點，你在做寫入（write）時，需要成功寫入 **W** 個節點；做讀取（read）時，需要從 **R** 個節點讀取得到回應。

- **寫入成功條件**：至少有 W 個節點確認了寫入。
    
- **讀取成功條件**：從至少 R 個節點讀到值，然後根據某種策略（如選最大 timestamp 的值）返回最「新」的那個。
    

為了保證任何一次讀取至少能看到最近一次成功的寫入，必須滿足：

mathematica

複製編輯

`R + W > N`

這樣讀取的節點集與寫入的節點集，**一定有交集**，交集上的節點至少有一份是最新寫入的值。

#### 什麼時候要聯想到這個原理？
- **設計跨多資料中心的服務時**  
    當你要把同一份資料複製到多個地理位置的節點上，並且希望：
    
    - 在某些節點故障或網路分裂時，依然可讀可寫（高可用）；
        
    - 同時大部分讀操作都能看到最新寫入（一致性）；  
        就要用到 quorum 機制，調整讀寫需要回應的節點數 RR／WW，並確保 R+W>NR+W>N。
        
- **調整 SLA（服務等級協議）時**  
    當你的應用對**延遲**與**資料鮮活度**的要求在變化：
    
    - 想要更低的寫入延遲／更高的可用性，就可以降低 WW；
        
    - 想要更嚴格的一致性，就要提高 WW 或 RR；  
        這時便要回到 quorum 公式 R+W>NR+W>N 來驗證調整後仍能保證交集不為空。
        
- **分析分布式 NoSQL／鍵值存儲系統時**  
    在評估像 Cassandra、Riak、Dynamo 等分散式儲存系統時，常會看到它們提供可調的讀寫複本數參數（通常標成 ‘ConsistencyLevel‘‘ConsistencyLevel‘），背後就是這套 quorum 理論。

[[5. Replication#Quorums for reading and writing]]