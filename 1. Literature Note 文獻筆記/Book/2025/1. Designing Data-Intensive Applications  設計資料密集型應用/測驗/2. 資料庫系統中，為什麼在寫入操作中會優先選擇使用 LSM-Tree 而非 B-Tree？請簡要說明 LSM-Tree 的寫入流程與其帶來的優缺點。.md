---
tags: []
date: 2025-06-11
time: 22:35
---

我的回答：
LSM代表log structured merge tree，這種格式只會在資料尾部新增資料，所以寫入速度很快，適合寫入場境多的情況。

回饋：

### 問題與可加強之處

- **只有「尾部新增」太過籠統**：LSM-Tree 的寫入並不只是「在尾部新增」，而是先寫入記憶體中的 MemTable，當 MemTable 滿了再 flush 成 Immutable SSTable(sorted string table) 檔案，最後再透過 compaction 把多個 SSTable 合併。
    
- **缺少比較與權衡**：除了寫入吞吐大，你也可以提到
    
    - **優點**：
        
        - 序列化寫入，大幅降低隨機 IO。
            
        - 支援批次刪除、範圍刪除更有效率（透過 tombstone）。
            
    - **缺點**：
        
        - Compaction 造成的寫放大（write amplification）。
            
        - 讀取時會有多層 SSTable，需要做 merge，增加讀放大（read amplification）。
            
        - 空間放大（space amplification）因為短期內會有多個版本的資料重疊。
            

### 改進版簡答

> **LSM-Tree**（Log-Structured Merge-Tree）在寫入時會先把修改寫到記憶體中的 MemTable，滿了之後 flush 為 Immutable SSTable，並定期做 compaction 合併舊檔。
> 
> - **優點**：所有寫入都是順序寫，能夠用連續的磁碟或 SSD 寫入，大幅提升寫入吞吐；批次刪除與範圍刪除也很高效。
>     
> - **缺點**：compaction 會帶來寫放大（多次寫入同一筆資料），讀取時需要跨多層 SSTable 做 merge，造成讀放大，且短期會有額外的空間放大。
>