---
tags: []
date: 2025-06-22
time: 22:08
---
回答：我記得有三種。題目列出了範圍分區和雜湊分區，應該還有一個是每個節點有固定分區數量的架構，所以整體分區數量可以隨著節點數量等比調整。

範圍分區應該比較有偏重的問題，例如我們可能比較需要給s開頭的key有更大的容量，因為s開頭的單字比較多。雜湊分區會能夠比較平均的分配負載。

[[6. Partitioning 分區#Partitioning of Key-Value Data]]

其實常見的分區策略大致可以分成四種：

1. **範圍分區（Range Partitioning）**
    
2. **雜湊分區（Hash Partitioning）**
    
3. **列表分區（List Partitioning）**
    
4. **輪詢分區（Round-Robin Partitioning）**
    

---

## **一、範圍分區（Range Partitioning）**

- **做法**：根據主鍵或某個排序欄位的值，劃分多個連續區間，各區間對應一個分區（節點）。
    
    - 例如：
        
        - 分區1：id < 1000
            
        - 分區2：1000 ≤ id < 2000
            
        - 分區3：id ≥ 2000
            
        
    
- **查詢效率**：
    
    - **優點**：當使用者做「範圍查詢」（如 id BETWEEN 1500 AND 2500）時，只需掃描一到兩個相鄰分區，I/O 很小。
        
    - **缺點**：如果資料在某些區間特別集中（熱點資料），就容易造成該分區過載（例如 id 多半落在 1000–2000 之間），負載不平衡。
        
    

---

## **二、雜湊分區（Hash Partitioning）**

- **做法**：對分區鍵（例如 user_id）做雜湊函式 H(user_id) mod N，N 為分區數，結果決定該 key 落在哪一個分區。
    
- **查詢效率**：
    
    - **優點**：天然平均地把資料散佈到所有分區，均衡負載，適合大量「點查詢」（如 WHERE user_id = 12345）。
        
    - **缺點**：若要做範圍查詢（user_id BETWEEN 1000 AND 2000），就必須向所有 N 個分區發查詢，再把結果合併，造成大量網路與 I/O。
        
    

---

## **三、列表分區（List Partitioning）**

- **做法**：預先定義好每個分區「支援的一組離散值清單」。
    
    - 例如：
        
        - 分區1：國家＝『台灣』『香港』
            
        - 分區2：國家＝『日本』『韓國』
            
        
    
- **適用場景**：當欄位值類別有限且固定（如地區、產品類別），可用列表分區快速定位分區，並避免範圍分區的熱點問題。
    

---

## **四、輪詢分區（Round-Robin Partitioning）**

- **做法**：不看資料內容，寫入時按順序（輪流）發給各分區。
    
- **優缺點**：
    
    - **優點**：實現簡單、能平均分配吞吐。
        
    - **缺點**：幾乎不支援任何查詢過濾，只能掃全量，適合寫入後再批次處理的場景。