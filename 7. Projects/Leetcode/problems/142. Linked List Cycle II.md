---
tags:
  - leetcode_medium
date: 2024-06-27
time: 22:19
---
[link](https://leetcode.com/problems/linked-list-cycle-ii/description/)

[[2025-02-20|2025-02-20 Thu, 22:53]]
在解[[287. Find the Duplicate Number]]時，想到之前想到的，對這題的另一種直覺想法。雖然本質是一樣的代數，但是直覺的多，有畫面感。

很簡單，只要把slow, fast走過的路徑，全部畫在同一條直線上就可以了。
```
	   m		    n           q
----------------o-------x---------------->
                ^                        |
                |                        |
                 -------------------------
```
o點為循環起始點，slow走過的路為m+n，fast走過的路為m+n+q+n，這樣可以知道 m == q。
所以從起點與x點一起走m或q步，即可抵達o點。

---

這是上一題[[141. Linked List Cycle]]的變化題。
當然，使用額外記憶體去紀錄走過的路線，比較出第一次重複出現的節點，就是找到循環的進入點了，但這很浪費時間，也浪費了上一次用龜兔賽跑解的優勢。

這題意外的用數學的方式，找出了解法。
我覺得這題有個關鍵的洞見，就是任何情況，都能走到slow在循環起點的情況。所以可以從slow在起點開始思考。

以下假設已是循環的狀況了。

- 假設沒有循環的路段長度`n`，循環的長度`m`。
- slow走了`n`步到了循環的進入點，此時fast走了`2n`步，也在循環內走了`n`步。此時距離他們相遇還有`m - n`步要走。
- 走了`m - n`步之後，slow在`n + (m - n) = m`的地方。此時已經可以不用管fast了
- slow在`m`的位置上，循環的起點位置在`m + n`上，還需要走n步。
- `n`步剛好是從head走到循環入口的所需步數。
- 結論：找到slow, head同速走到相遇的點，即是入口

[[2024-12-15|2024-12-15, 13:44]]
重新解了一次，因為有印象要用像是代數的方式解，所以沒有卡住太久。
~~我畫了一個像是棒棒糖的示意圖，這蠻助於理解的。~~
重點要畫把zm攤開的示意圖。

我一直以來用的演算法有誤。fast可能已經在循環裡走了很多圈，沒出錯是剛好而已。
```
slow到了循環入口處之後走了y步才與fast相會
x = n + y

fast繞了循環m圈，走了y步與slow相遇
2x = n + zm + y

重點不是算x，是算n
2n + 2y = n + zm + y
n = zm - y
```
slow目前位置，距離fast最後一次經過入口的位置為 `zm - y`，根據上面的算是，剛好等於n
所以slow, head各走n步，就會交匯於入口。