---
tags:
  - leetcode_medium
date: 2024-06-04
time: 21:44
---
[link](https://leetcode.com/problems/rotate-image/description/)
[Rotate Image](https://neetcode.io/problems/rotate-matrix)

[[2025-01-11|2025-01-11 Sat, 16:03]]
neetcode複習，花的時間應該是還好。


想當初面天緒時也考過類似的。但這次感覺花的時間好多....
現在寫完是10:38，花了54分鐘。

中間遇到一個bug，指定範圍沒指定好。
重點是`j`的範圍，以及`i`作爲offset沒做好。

另外注意：畫圖時，座標理解的x, y，與題目給的二維陣列表示方法是相反的。
```
(x, y) => matrix[y][x]
```


```ts
/**
 Do not return anything, modify matrix in-place instead.
 */
function rotate(matrix: number[][]): void {
    const length = matrix.length;
    if (length <= 1) {
        return;
    }
    for (let i = 0; i < Math.floor(length / 2); i++) {

        const sum = length - (2 * i) - 1;
        for (let j = 0; j < sum; j++) {
            let temp = matrix[i][i+j];
            matrix[i][i+j] = matrix[i+sum-j][i];
            matrix[i+sum-j][i] = matrix[i+sum][i+sum-j];
            matrix[i+sum][i+sum-j] = matrix[i+j][i+sum];
            matrix[i+j][i+sum] = temp;
        }
    }
};

// wrong version
for (let j = i; j < sum; j++) {
	let temp = matrix[i][j];
	matrix[i][j] = matrix[sum-j][i];
	matrix[sum-j][i] = matrix[sum][sum-j];
	matrix[sum][sum-j] = matrix[j][sum];
	matrix[j][sum] = temp;
}

```


查看以前寫的版本後，發現以前的自己很神，但也沒做好題目的要求？
題目是說不能在另外copy一個matrix來做旋轉，以前的版本有做。
好處是寫法變得**非常簡潔**

```cpp
void rotate(vector<vector<int>>& matrix) {
    vector<vector<int>> temp = matrix;
    int n = matrix.size();
    
    for(int i=0;i<n;i++){
        for(int j=0;j<n;j++){
            matrix[i][j] = temp[n-1-j][i];
        }
    }
    
    return;
}
/*
 這題在之前面試也有被考到，興號當時有想出來。這題的思考方向我後來歸納出了兩種：
    一種是可以拿出一張紙，你實際旋轉看看就會知道，你可以先對角線對調成[j][i]這樣，在進行左右對調
    成[n-1-j][i]
 
    第二種是參考線性代數，或是座標上你要如何旋轉一個點，
    公式是(x', y') = (x*cos(pi/2) - y*sin(pi/2), x*sin(pi/2) + y*cos(pi/2)
    比較違反直覺地，程式相較於座標不一樣的地方在於：你要assign新值給本來的位置上，而新值的
    來源卻是反方向旋轉的地方
 */


```

# 試著朝幾何上來解釋的話：

1. 首先觀察題目的x, y方向。x朝右，y朝下
2. 資料來源的x對應到被寫入的y，方向是一樣的
3. 資料來源的y對應到被寫入的x，方向相反
4. j是x，i是y